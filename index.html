<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To-Do List</title>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comfortaa', cursive;
            background: transparent;
            padding: 30px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
        }

        .list-container {
            margin-bottom: 60px;
        }

        .list-title {
            font-size: 36px;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 25px;
        }

        .add-task-form {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
        }

        .task-input {
            flex: 1;
            padding: 12px 5px;
            border: none;
            border-bottom: 2px solid rgba(255, 255, 255, 0.4);
            background: transparent;
            color: #ffffff;
            font-size: 18px;
            font-family: 'Comfortaa', cursive;
            outline: none;
        }

        .task-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .add-btn {
            padding: 8px 16px;
            border: none;
            background: transparent;
            color: #ffffff;
            font-size: 32px;
            cursor: pointer;
            font-weight: 300;
        }

        .tasks {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .task {
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: move;
            padding: 8px 0;
        }

        .task.dragging {
            opacity: 0.3;
        }

        .checkbox {
            width: 26px;
            height: 26px;
            min-width: 26px;
            border: 2px solid #ffffff;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .checkbox.checked::after {
            content: '✓';
            color: #ffffff;
            font-size: 18px;
            font-weight: bold;
        }

        .task-text {
            flex: 1;
            font-size: 20px;
            color: #ffffff;
            word-break: break-word;
        }

        .task.completed .task-text {
            text-decoration: line-through;
            opacity: 0.4;
        }

        .delete-btn {
            padding: 5px 10px;
            border: none;
            background: transparent;
            color: #ffffff;
            font-size: 24px;
            cursor: pointer;
            opacity: 0.7;
        }

        .delete-btn:hover {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="list-container">
            <h2 class="list-title">This Week</h2>
            <div class="add-task-form">
                <input type="text" class="task-input" id="thisWeekInput" placeholder="Add a task...">
                <button class="add-btn" onclick="addTask('thisWeek')">+</button>
            </div>
            <div class="tasks" id="thisWeek"></div>
        </div>

        <div class="list-container">
            <h2 class="list-title">For Later</h2>
            <div class="add-task-form">
                <input type="text" class="task-input" id="forLaterInput" placeholder="Add a task...">
                <button class="add-btn" onclick="addTask('forLater')">+</button>
            </div>
            <div class="tasks" id="forLater"></div>
        </div>
    </div>

    <script>
        let tasks = {
            thisWeek: [],
            forLater: []
        };

        let draggedTask = null;
        let draggedFrom = null;

        function saveTasks() {
            const data = JSON.stringify(tasks);
            document.cookie = `todoTasks=${encodeURIComponent(data)}; max-age=31536000; path=/`;
        }

        function loadTasks() {
            const cookies = document.cookie.split(';');
            for (let cookie of cookies) {
                const [name, value] = cookie.trim().split('=');
                if (name === 'todoTasks') {
                    try {
                        tasks = JSON.parse(decodeURIComponent(value));
                    } catch (e) {
                        console.error('Error loading tasks:', e);
                    }
                    break;
                }
            }
            renderTasks();
        }

        function addTask(listId) {
            const input = document.getElementById(listId + 'Input');
            const text = input.value.trim();
            
            if (text === '') return;
            
            const task = {
                id: Date.now(),
                text: text,
                completed: false
            };
            
            tasks[listId].push(task);
            input.value = '';
            saveTasks();
            renderTasks();
        }

        function toggleTask(listId, taskId) {
            const task = tasks[listId].find(t => t.id === taskId);
            if (task) {
                task.completed = !task.completed;
                saveTasks();
                renderTasks();
            }
        }

        function deleteTask(listId, taskId) {
            tasks[listId] = tasks[listId].filter(t => t.id !== taskId);
            saveTasks();
            renderTasks();
        }

        function renderTasks() {
            ['thisWeek', 'forLater'].forEach(listId => {
                const container = document.getElementById(listId);
                container.innerHTML = '';
                
                tasks[listId].forEach(task => {
                    const taskEl = document.createElement('div');
                    taskEl.className = 'task' + (task.completed ? ' completed' : '');
                    taskEl.draggable = true;
                    taskEl.dataset.taskId = task.id;
                    taskEl.dataset.listId = listId;
                    
                    taskEl.innerHTML = `
                        <div class="checkbox ${task.completed ? 'checked' : ''}" onclick="toggleTask('${listId}', ${task.id})"></div>
                        <div class="task-text">${task.text}</div>
                        <button class="delete-btn" onclick="deleteTask('${listId}', ${task.id})">×</button>
                    `;
                    
                    taskEl.addEventListener('dragstart', handleDragStart);
                    taskEl.addEventListener('dragend', handleDragEnd);
                    taskEl.addEventListener('dragover', handleDragOver);
                    taskEl.addEventListener('drop', handleDrop);
                    
                    container.appendChild(taskEl);
                });
            });
        }

        function handleDragStart(e) {
            draggedTask = this;
            draggedFrom = this.dataset.listId;
            this.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
        }

        function handleDragEnd(e) {
            this.classList.remove('dragging');
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
            return false;
        }

        function handleDrop(e) {
            e.stopPropagation();
            e.preventDefault();
            
            const dropListId = this.dataset.listId;
            const draggedTaskId = parseInt(draggedTask.dataset.taskId);
            
            if (draggedFrom !== dropListId) {
                const taskIndex = tasks[draggedFrom].findIndex(t => t.id === draggedTaskId);
                if (taskIndex !== -1) {
                    const task = tasks[draggedFrom][taskIndex];
                    tasks[draggedFrom].splice(taskIndex, 1);
                    tasks[dropListId].push(task);
                    saveTasks();
                    renderTasks();
                }
            }
            
            return false;
        }

        document.getElementById('thisWeekInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addTask('thisWeek');
            }
        });

        document.getElementById('forLaterInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addTask('forLater');
            }
        });

        loadTasks();
    </script>
</body>
</html>
